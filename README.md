# GCP
# 谷歌云平台 :see_no_evil:


<a name="3060-1621846615933"></a><a name="i3iw-1703890508936"></a>[GCP 开发专业认证示例](#ufyh-1701975693298)

<a name="jybp-1703890508938"></a>[Cloud Storage](#25jy-1703889896088)

<a name="mqep-1703890508940"></a>[Cloud SQL](#mv1r-1703889896089)

<a name="qlev-1703890508942"></a>[BigQuery](#nx8n-1703889896090)

<a name="oksk-1703890508944"></a>[BigTable](#agrh-1703889896091)

<a name="v1uo-1703890508946"></a>[GCP概念介绍](#kpfy-1702330971738)

<a name="7dgy-1703890508948"></a>[虚拟机实例](#ggyv-1703541111637)

<a name="rsqv-1703890508950"></a>[.虚拟机实例创建](#cwxb-1703546395338)

<a name="yfwz-1703890508952"></a>[.自动扩缩实例组](#eoin-1703546407515)

<a name="rdyg-1703890508954"></a>[永久磁盘](#be5a-1703541270839)

<a name="5hfo-1703890508956"></a>[·可用区永久性磁盘:高效、可靠的块存储。](#nnug-1703612874892)

<a name="qm1u-1703890508958"></a>[1.增量快照](#ighl-1703613111760)

<a name="yh2g-1703890508960"></a>[·区域永久性磁盘:在两个可用区中复制的区域块存储。](#5h2a-1703612875334)

<a name="wwmb-1703890508962"></a>[·本地SSD:高性能暂时性本地块存储。](#pvwg-1703612926251)

<a name="pzbe-1703890508964"></a>[. Cloud Storage存储桶:经济实惠的对象存储。](#uabg-1703612875336)

<a name="ydel-1703890508966"></a>[.Filestore:适用于Google Cloud 用户的高性能文件存储。](#6kzl-1703612875338)

<a name="epng-1703890508968"></a>[永久性磁盘快照迁移虚拟机实例](#vxpl-1703612920413)

<a name="1s0q-1703890508970"></a>[镜像(创建实例)](#09yn-1703541282443)

<a name="1wpp-1703890508972"></a>[.公共映像](#mdjz-1703614307842)

<a name="rnln-1703890508974"></a>[.自定义映像(仅适用于您的Cloud项目)](#bh1n-1703614309803)

<a name="qcob-1703890508976"></a>[.自定义镜像复制虚拟机实例](#ulho-1703541313574)

<a name="sd3k-1703890508978"></a>[健康检查](#tarc-1703724449830)

<a name="tqjm-1703890508980"></a>[.概念](#rqxl-1703724471007)

<a name="le6z-1703890508983"></a>[.代管实例组设置健康检查](#i8fb-1703724480813)

<a name="cikw-1703890508985"></a>[Deployment Manager ](#yhzq-1616513583057)

<a name="kpwu-1703890508987"></a>[.概念&使用](#xdzn-1703725192671)

<a name="1wo6-1703890508989"></a>[配置](#2nza-1703727491343)

<a name="sxwe-1703890508991"></a>[模板](#kbmu-1703727491578)

<a name="tbrd-1703890508993"></a>[资源（yml）](#srgz-1703727491579)

<a name="wvya-1703890508995"></a>[类型](#1mij-1703727491580)

<a name="pcco-1703890508997"></a>[清单](#5yms-1703727491581)

<a name="oyl0-1703890508999"></a>[部署 ](#wrzx-1703727491582)

<a name="1qv9-1703890509001"></a>[IP地址](#aixa-1616512706321)

<a name="vheq-1703890509003"></a>[.临时外部ip(停止/删除资源即释放)](#e3rs-1703728098691)

<a name="xn1j-1703890509005"></a>[.静态外部ip(存续)](#es1k-1703731934318)

<a name="kiym-1703890509007"></a>[负载均衡(7层，4层)](#8m0l-1703731963710)

<a name="2dy7-1703890509009"></a>[内部HTTP(S)负载均衡 ](#qxfq-1703776527441)

<a name="l3cs-1703890509011"></a>[外部 HTTP(S)负载平衡](#zavj-1703776539919)

<a name="s0cq-1703890509013"></a>[内部 TCP/UDP负载平衡](#ysf5-1703776527746)

<a name="5epu-1703890509015"></a>[外部 TCP/UDP网络负载均衡](#rs4k-1703776527748)

<a name="84v6-1703890509017"></a>[外部 SSL代理负载均衡](#480j-1703776543001)

<a name="j4qo-1703890509019"></a>[外部 TCP代理负载均衡](#pmhc-1703776527750)

<a name="xvss-1703890509021"></a>[.基于目标池的外部TCP网络负载均衡器](#iti7-1703728091914)

<a name="fub0-1703890509023"></a>[.Armor(安全政策)](#2550-1595249949242)

<a name="hysd-1703890509025"></a>[.为负载均衡器设置Armor操作](#5cua-1703776702621)

<a name="en7n-1703890509027"></a>[Cloud Storage(对象存储(日志,图片))](#2422-1585069536532)

<a name="dr0p-1703890509029"></a>[.概念](#cste-1703802087930)

<a name="b16l-1703890509031"></a>[1.对象存储(日志,图片)](#baiz-1703803038821)

<a name="xeeg-1703890509033"></a>[2.保护数据安全(IAM,数据加密,身份验证,分区锁定，版本控制)](#9b82-1703803056615)

<a name="vanq-1703890509035"></a>[3.存储桶(基本容器)](#xfiw-1703802132873)

<a name="lg0c-1703890509037"></a>[.存储桶相关操作](#a4wj-1703803208413)

<a name="lvqn-1703890509039"></a>[.对象生命周期管理](#tmfk-1703802111046)

<a name="pznk-1703890509041"></a>[.Storage Transfer Service(多云数据转移)](#bp2u-1703802871900)

<a name="zf7h-1703890509043"></a>[Cloud SQL](#tvdh-1703804630431)

<a name="dvwl-1703890509045"></a>[.概念](#iczc-1703872944177)

<a name="8sfb-1703890509047"></a>[.for Mysql](#2c49-1703872957141)

<a name="6z3c-1703890509049"></a>[.数据库灾难恢复](#dst5-1703872971504)

<a name="iu35-1703890509051"></a>[1.使主实例不可用](#nvah-1703877658127)

<a name="jjou-1703890509053"></a>[2.实施灾难恢复](#uiqd-1703877659651)

<a name="7yzb-1703890509055"></a>[3.新主启用高可用](#ilev-1703877708388)

<a name="9a7y-1703890509057"></a>[BigQuery(数仓，Sql分析)](#ywx5-1703872998042)

<a name="2wan-1703890509059"></a>[.加载和查询数据](#y2zg-1703873024896)

<a name="um56-1703890509061"></a>[Bigtable(HBase竞品)](#bsyq-1703873049958)

<a name="hgz3-1703890509063"></a>[.数据写入与读取](#oejc-1703873059122)

<a name="qxws-1703890509065"></a>[ Firestore(会话存储)](#xdlt-1703873017651)

<a name="2ozk-1703890509068"></a>[Cloud Spanner(跨区域高可用)](#bh8z-1703872927361)

<a name="ymqk-1703890509070"></a>[Cloud Data Loss Prevention(损失预防/敏感数据)](#evlf-1703889764129)



<a name="ufyh-1701975693298"></a>**全球云服务厂商对比**

<a name="ewpv-1738742769521"></a>**总结**

<a name="vrcl-1738742816813"></a>AWS 凭借其 **最全面的产品矩阵、最强大的全球基础设施、最丰富的企业客户、最领先的AI/ML能力**，在全球云计算市场中长期占据领导地位。对于希望进行 **全球业务扩展、使用最成熟云服务、获得最佳性能和安全性** 的企业来说，AWS 仍然是最具竞争力的选择。

|<a name="l4sj-1738742770127"></a>**对比项**|<a name="vcbj-1738742770130"></a>**AWS**|<a name="rh3c-1738742770133"></a>**Azure**|<a name="wijf-1738742770136"></a>**Google Cloud**|<a name="pagd-1738742770139"></a>**Alibaba Cloud**|
| :- | :- | :- | :- | :- |
|<a name="uc6c-1738742770144"></a>**市场占有率**|<a name="zeho-1738742770147"></a>🏆 第一（33%）|<a name="vx8o-1738742770150"></a>第二（20%）|<a name="naq6-1738742770154"></a>第三（10%）|<a name="kaj9-1738742770157"></a>亚洲市场领先（全球第四）|
|<a name="wkgu-1738742770162"></a>**产品数量**|<a name="gnfk-1738742770165"></a>最全面，超200种|<a name="dclt-1738742770168"></a>微软生态整合强|<a name="6oyv-1738742770171"></a>AI和数据分析强|<a name="lpng-1738742770174"></a>在中国市场最具竞争力|
|<a name="4mh7-1738742770179"></a>**全球数据中心**|<a name="ly0s-1738742770182"></a>最多，覆盖全球|<a name="vx0x-1738742770185"></a>次之，覆盖率较广|<a name="kl9g-1738742770188"></a>相对较少，但不断扩展|<a name="jux6-1738742770191"></a>主要在亚洲，海外数据中心较少|
|<a name="60i6-1738742770196"></a>**AI/ML能力**|<a name="3rzg-1738742770199"></a>领先的SageMaker|<a name="jykx-1738742770202"></a>依托微软AI能力|<a name="dp8d-1738742770205"></a>AI/ML能力最强|<a name="wnhj-1738742770208"></a>在国内市场较强|


|<a name="yx10-1745005926165"></a><a name="cn3y-1738742770213"></a>**大数据能力**|<a name="w7qu-1738742770216"></a>Redshift、Athena等丰富|<a name="0xek-1738742770219"></a>与Microsoft Power BI整合|<a name="8a7c-1738742770222"></a>BigQuery全球领先|<a name="gvg8-1738742770225"></a>适合国内大数据处理|
| :- | :- | :- | :- | :- |


|<a name="ti47-1741007569663"></a><a name="fw2a-1738742770230"></a>**企业客户**|<a name="ezrs-1738742770233"></a>Netflix、Airbnb、NASA等|<a name="ep3v-1738742770236"></a>SAP、Office 365等|<a name="dvad-1738742770239"></a>YouTube、Spotify等|<a name="1rva-1738742770242"></a>阿里巴巴、国内企业|
| :- | :- | :- | :- | :- |
|<a name="xql4-1738742770247"></a>**价格模式**|<a name="kftj-1738742770250"></a>按需付费+预留实例|<a name="ba5g-1738742770253"></a>结合微软企业套餐|<a name="xscq-1738742770256"></a>相对较低|<a name="nonk-1738742770259"></a>适合中国企业|



<a name="ea6m-1738742755271"></a><a name="grgq-1741341163885"></a><a name="wjhe-1741341164062"></a><a name="dpwa-1738742755619"></a>**Google Cloud Platform主要服务**

![image.png](Aspose.Words.f3889c45-de2a-4c0e-a029-3cc7d754c8f7.001.png)

<a name="g24a-1703958573661"></a><a name="lviv-1703958571950"></a>GCP 服务更偏工程抽象，阿里云则是产品颗粒度更细。

<a name="xjej-1745006115483"></a>阿里云很多产品功能融合较强，可能一个 GCP 服务，对应阿里云多个组件组合。

<a name="r9sq-1745006115487"></a>Serverless 方面：GCP 的 Cloud Run + Cloud Functions 更细致，阿里云则统一走“函数计算 + 网关 + 流水线”模式。

稳！覆盖率80%以上，买PDF题库的同学们一定要以社区投票为准呀，别像我，挂过一次才知道。或者要小程序更稳。

PS：答案是根据社区投票最高选择的，软件分析有错的

小程序答案分析偏正确的,但不一定和答案匹配 

` `11D  GPT D ingress 负载均衡  社区和答案选B stander level

` `31C  GPT opentelemetry    new app 需安装lib 社区和答案选A 社区A57 C43

` `64C python stackdrive error repo lib 

` `65B 275   社区C don't take SLO based on current performance

` `82！look at 40  B

` `84~ user-agent

` `85C burn\_rate

` `86C GCloud CLI Agent Policy

` `87C  sub/pub 实时性更强

` `90A  解析A 1%流量    社区最多C不切流量  ，确实是C.不切流量

` `91B  社区和答案选B 自动化减少人为失误技术债务降低运营成本，释放资源   解析选C指定错误预算

` `93AC  社区和答案AC work load身份 和新账户IAM  解析选BE

` `95D   社区和答案D enforce强制执行      解析选C syn执行同步环境

` `97A    社区和答案D dev pro             解析选A 组织级别单个 ，看解析有道理

` `99D   社区和答案选D 触发Cloud build推送代码时运行测试，触发cloud build构建应用程序推送容器注册中心时在测试环境部署测试   解析选A，git hook在推送代码时触发测试,触发cloud build构建应用程序

` `100A  社区和答案选A 金丝雀部署GPT也选canary   解析选B 蓝绿部署   (解析是错的，题目在未完全测试的情况下降低风险)

` `GCP Use Canary when you're unsure about performance/stability.

` `Use Blue/Green when the new version is fully tested and ready.



` `101D  GPT、社区和答案选D VPC FLow log   解析C firw wall log

<a name="snqu-1745594807104"></a> 102D  GPT、社区和答案选D Horizontal autoscaler  解析A vertical pod

<a name="tu3f-1745594803947"></a><a name="n5ue-1745594804323"></a>**计算服务类**

|<a name="5xqv-1745005918053"></a>GCP 服务|<a name="sbbz-1745005918056"></a>阿里云对应服务|<a name="byhs-1745005918059"></a>简要说明|
| :- | :- | :- |
|<a name="j7fo-1745005918063"></a>**Compute Engine**|<a name="rl4a-1745005918066"></a>**ECS（弹性计算服务）**|<a name="so4r-1745005918069"></a>虚拟机服务|
|<a name="hxet-1745005918073"></a>**App Engine**|<a name="grfe-1745005918076"></a>**函数计算（FC）或 EDAS**|<a name="bhdj-1745005918079"></a>无需运维的 PaaS / Serverless 应用托管|
|<a name="abmg-1745005918083"></a>**Cloud Run**|<a name="v7nk-1745005918086"></a>**函数计算（FC）+ API 网关**|<a name="f0mn-1745005918089"></a>容器化 Serverless|
|<a name="smqk-1745005918093"></a>**GKE（Kubernetes Engine）**|<a name="exa1-1745005918096"></a>**ACK（容器服务 Kubernetes 版）**|<a name="7w97-1745005918099"></a>托管 Kubernetes|
|<a name="qf4m-1745005918103"></a>**Cloud Functions**|<a name="bqu3-1745005918106"></a>**函数计算（Function Compute）**|<a name="clke-1745005918109"></a>Serverless 函数|

<a name="wco0-1745005998443"></a>**Compute Engine**

<a name="1gmu-1745269963588"></a>相当于阿里云 **ECS 弹性计算服务**

<a name="t7le-1745320019809"></a>**App Engine 无需运维的 PaaS / Serverless 应用托管**

<a name="kikd-1745320019953"></a>Google App Engine（GAE）是 Google Cloud Platform（GCP）提供的全托管式无服务器计算平台，专注于托管网络应用程序和移动后端服务

<a name="mp8e-1745269944064"></a>**Managed Instance Group MIG 实例托管组**

<a name="rzx6-1745266863803"></a>相当于阿里云**弹性伸缩组（Auto Scaling Group）**

<a name="cnbw-1745269433948"></a>**Cloud Run  容器化serverless**

<a name="unka-1745320721967"></a>**Google Kubernetes Engine （GKE）**

<a name="2fxj-1745320736942"></a>相当于阿里云**ACK（ali cotainer kubernets）**

<a name="07oz-1745320768573"></a>Role-Based Access Control **RBAC  基于角色的访问控制**

<a name="vtwv-1745763202193"></a>**-容器回滚到确切可运行版本 使用sha256**

<a name="jwqd-1745763246586"></a>将您的GoogleKubernetesEngine(GKE)集群更新到运行一个按预期工作的容器版本，尽管最新的容器

<a name="ievp-1745763203580"></a>镜像有未知的变化。

<a name="0oll-1745763203582"></a>修改部署配置，使其指向之前工作容器的sha256摘要。使用sha256摘要提供了对容器镜像特定版本

<a name="xne7-1745763203584"></a>的精确且不可变的引用，确保部署的是已知可工作的确切镜像。这种方法消除了使用“latest”等标签

<a name="6rzv-1745763203586"></a>所关联的任何歧义，并提供了一种可靠的回滚到已知良好状态的方法。

<a name="ojnd-1745763203588"></a>通过引用sha256摘要，您可以控制集群中部署的容器镜像版本，并有效地解决由最新标签的意外变化

<a name="11of-1745763203590"></a>引起的问题。

<a name="89kp-1745667444588"></a>**HPA Horizontal Pod Autoscaler**

<a name="b7zq-1745667478739"></a>  水平Pod伸缩器

<a name="chhb-1745337946107"></a>**Anthos servise mesh安托斯服务网格**

<a name="nfl7-1745698113328"></a>**CloudFunction**

<a name="bgw7-1745698142070"></a>  **函数计算（Function Compute）serverless函数**

<a name="8kgl-1745698165231"></a>Cloud storage trigger的cloud function

<a name="n44l-1745698287161"></a>云存储触发器云函数，自动扩展计算引擎扩展管理实例组

<a name="tksw-1745699146926"></a>**Recommend API**

<a name="ilsv-1745699203086"></a>通过使用这些API，开发者可以创建和管理推荐模型

<a name="dju2-1745269242618"></a>**存储与数据库**

|<a name="k10u-1745005954553"></a>GCP 服务|<a name="ibyx-1745005954556"></a>阿里云对应服务|<a name="rsyg-1745005954559"></a>简要说明|
| :- | :- | :- |
|<a name="oy8a-1745005954563"></a>**Cloud Storage**|<a name="mzyf-1745005954566"></a>**OSS（对象存储）**|<a name="xyud-1745005954569"></a>文件/对象存储|
|<a name="moxb-1745005954573"></a>**Cloud SQL**|<a name="eyf9-1745005954576"></a>**RDS（关系型数据库）**|<a name="kirq-1745005954579"></a>托管 MySQL / PostgreSQL|
|<a name="idgo-1745005954583"></a>**Firestore / Datastore**|<a name="e778-1745005954586"></a>**表格存储（Table Store）**|<a name="hhft-1745005954589"></a>NoSQL 数据库|
|<a name="vqpc-1745005954593"></a>**BigQuery**|<a name="auwp-1745005954596"></a>**MaxCompute / Hologres**|<a name="isqh-1745005954599"></a>数据仓库（大数据分析）|
|<a name="z1iv-1745005954603"></a>**Spanner**|<a name="plgm-1745005954606"></a>**PolarDB-X（或分布式 RDS）**|<a name="pl8i-1745005954609"></a>分布式数据库|

<a name="yz0n-1745004906743"></a>**Cloud Storage 文件/对象存储**

<a name="ryia-1745269537493"></a>相当于阿里云 **OSS Object Storage Service**

<a name="xfci-1745354138519"></a>**Pub/Sub 消息**

<a name="6gqb-1745354192098"></a>相当于阿里云 **消息队列RocketMQ**

<a name="aw00-1745354224387"></a>吞吐量：百万级QPS          10万级QPS

<a name="9omy-1745354260919"></a>延迟：毫秒级全球部署         毫秒级区域级部署

<a name="yhpg-1745354261209"></a><a name="kqzi-1745269460469"></a>**网络和安全**

|<a name="ae9m-1745006039882"></a>GCP 服务|<a name="7rrv-1745006039885"></a>阿里云对应服务|<a name="uuf3-1745006039888"></a>简要说明|
| :- | :- | :- |
|<a name="7mio-1745006039893"></a>**VPC（虚拟私有云）**|<a name="z7ai-1745006039896"></a>**VPC（专有网络）**|<a name="t0hr-1745006039899"></a>网络隔离|
|<a name="yylg-1745006039903"></a>**Cloud Load Balancing**|<a name="vh62-1745006039906"></a>**SLB（负载均衡）**|<a name="boas-1745006039909"></a>应用层或传输层负载均衡|
|<a name="ygbd-1745006039913"></a>**Cloud CDN**|<a name="qn2w-1745006039916"></a>**阿里云 CDN**|<a name="unvy-1745006039919"></a>全球内容分发网络|
|<a name="qwkg-1745006039923"></a>**Cloud Armor**|<a name="kckb-1745006039926"></a>**Web 应用防火墙（WAF）**|<a name="auyg-1745006039929"></a>DDoS / 应用层防护|
|<a name="f7il-1745006039933"></a>**Cloud NAT / IAP**|<a name="o8pi-1745006039936"></a>**NAT 网关 / 安全堡垒机**|<a name="oooq-1745006039939"></a>出网控制 / 内网访问管理|

<a name="tavh-1745006031093"></a>**GCLB  Google Cloud Load Balancing**

<a name="rudf-1745270210368"></a>相当于阿里云 **SLB（Server Load Balancing）**

<a name="kjml-1745270176770"></a>**Ingress GKE中负载均衡器实现应用暴露与流量分发**

<a name="nqoe-1745266868728"></a>谷歌云‌**GKE Ingress**‌是GKE（Google Kubernetes Engine）中用于管理HTTP(S)流量路由的核心组件，通过原生集成Google Cloud负载均衡器实现应用暴露与流量分发14。以下是其关键特性与实现细节：

<a name="uijd-1745269407877"></a> **Loging Sink 日志沟槽**

<a name="x7yr-1745684017818"></a>Sink是一个配置，它定义了日志数据的目的地和导出方式。通过配置Sink，

<a name="pezq-1745326742099"></a>**Key Management Service 秘钥管理服务**

<a name="wvne-1745328276476"></a>**‌OpenTelemetry  开源的监控系统**

<a name="g6fy-1745328295906"></a>需要安装代理 agent

<a name="bn2b-1745326742619"></a>**StackDriver(云监控、日志管理、错误报告)**

<a name="hxjm-1745316865734"></a>需要安装agent

<a name="3fju-1745179454981"></a>**GCP Stackdriver**‌是[Google Cloud Platform](https://www.baidu.com/s?rsv_dl=re_dqa_generate&sa=re_dqa_generate&wd=Google%20Cloud%20Platform&rsv_pq=ca3679d10c522e68&oq=GCP%20stackdriver%E6%98%AF%E4%BB%80%E4%B9%88&rsv_t=7a002h14uMurL+ei7TAQ9vPDL1dLVslSNKm1cC1QX5ppuEwg/RhMhFw5czmfplNdIGiX&tn=baiduhome_pg&ie=utf-8)（GCP）提供的一套全面的云监控、日志管理和错误报告工具。它可以帮助开发人员和运维团队实时监控应用程序和基础设施的性能和可用性，主要功能包括监控、日志管理和错误报告‌

<a name="s7pk-1745266824773"></a>相当于阿里云 **云监控（CloudMonitor）**‌与‌**应用实时监控服务（ARMS）**‌的组合

<a name="0hux-1745269159702"></a>**Stackdriver Monitoring‌** 

<a name="yufc-1745314524633"></a>相当于阿里云 **云监控（CloudMonitor）**

<a name="gqmr-1745672673380"></a> Cloud Run 自动集成Cloud Monitoring,无需配置

<a name="oqqc-1745314799516"></a>**Stackdriver Profiler‌ 云分析器**

<a name="aqoc-1745314803227"></a>在功能定位上相当于阿里云的 ‌**应用实时监控服务 ARMS**

<a name="kdzk-1745672607752"></a> **-**不直接支持Clound run环境,

<a name="17gd-1745761395391"></a>-配置云性能分析器并初始化cloud.google.com/go/profiler库。云性能分析器旨在为生产环境中的低开销持续分析而设计。

<a name="gtek-1745314508697"></a>**StackDriver Logging‌**

<a name="a3hm-1745268212462"></a>相当于阿里云 **SLS日志服务**

<a name="7zwt-1745268313105"></a>同时其部分功能延伸至‌**操作审计（ActionTrail）**‌和‌**云监控（CloudMonitor）**

<a name="rysq-1745331915054"></a>**Fluentd 开源的日志收集和传输工具**

<a name="yii4-1745331930480"></a>personally identifiable information (PIl) is leaking PII问题泄露问题：filter-recored-transformer过滤插件，在日志写入stackdriver前删除

<a name="wuz3-1745269157997"></a>**身份与权限管理**

|<a name="yv5s-1745006148406"></a>GCP 服务|<a name="0h6k-1745006148409"></a>阿里云对应服务|<a name="nzzi-1745006148412"></a>简要说明|
| :- | :- | :- |
|<a name="urx2-1745006148416"></a>**IAM（Identity and Access Management）**|<a name="bbqu-1745006148419"></a>**RAM（访问控制）**|<a name="ycx4-1745006148422"></a>权限分配与策略管理|
|<a name="v44m-1745006148426"></a>**Organization + Folders**|<a name="drn2-1745006148429"></a>**资源目录（Resource Directory）**|<a name="dsto-1745006148432"></a>多账号统一管理|

<a name="3vji-1745006183727"></a>**IAM‌ 权限分配与策略管理**

<a name="ddui-1745268264342"></a>当于阿里云 **RAM Resource Access Manager资源访问管理**

<a name="csqt-1745315213455"></a><a name="xy2o-1745315213608"></a>**Binary Authorization‌ 容器镜像的部署策略管控与安全验证**

<a name="smml-1745315217253"></a>在功能定位上相当于阿里云 ‌**容器镜像服务 ACR（Container Registry）**

<a name="olzw-1745315231033"></a><a name="vfpa-1745269207139"></a>**DevOps / 工具链**

|<a name="3d3v-1745006194868"></a>GCP 服务|<a name="dllj-1745006194871"></a>阿里云对应服务|<a name="unyn-1745006194874"></a>简要说明|
| :- | :- | :- |
|<a name="zsf6-1745006194878"></a>**Cloud Build**|<a name="giag-1745006194881"></a>**云效流水线 / CodePipeline**|<a name="19vm-1745006194884"></a>CI/CD 构建部署工具|
|<a name="7y8z-1745006194888"></a>**Artifact Registry**|<a name="obhg-1745006194891"></a>**阿里云制品库**|<a name="5d58-1745006194894"></a>存放镜像、包、依赖|
|<a name="ckl1-1745006194898"></a>**Cloud Scheduler**|<a name="lg75-1745006194901"></a>**定时任务服务 / 云函数 + 定时触发器**|<a name="5moe-1745006194904"></a>定时执行任务|
|<a name="ri2w-1745006194908"></a>**Operations（监控+日志）**|<a name="f6qc-1745006194911"></a>**云监控（CloudMonitor）+ 日志服务（SLS）**|<a name="zo75-1745006194914"></a>可观测性平台|
|<a name="e7wj-1745006194918"></a>**Secret Manager**|<a name="ormd-1745006194921"></a>**密钥管理服务（KMS）/ 配置服务 ACM**|<a name="a23c-1745006194924"></a>密钥与配置管理|

<a name="9yqf-1745006051340"></a>**Cloud Build  CICD构建部署工具**

<a name="y806-1745267424958"></a>相当于阿里云 **云效流水线/code pipeline**

<a name="ltr7-1745671765697"></a>**Packet**  

<a name="hh4o-1745671799929"></a>云构建与Packer无缝集成，Packer是一种跨平台创建机器镜像的工具。这种组合提供了一种灵活可扩展的解决方案，

<a name="dgxa-1745671924016"></a>用于构建自定义镜像并在不同的云服务提供商之间部署。

<a name="p804-1745671929811"></a>Packer允许您定义基础设施即代码，并支持多个云服务提供商，确保能够适应多云环境中的未来变化。

<a name="xogr-1745317392086"></a>**Artifact Registry(镜像，依赖包)**

<a name="mfho-1745269707501"></a> Artifact指软件开发流程中生成的文件或数据，例如容器镜像、编译后的二进制文件、语言依赖包（如 Maven、npm）、测试报告等48。

<a name="0oet-1745317380331"></a>谷歌云 Artifact Registry 即为此类制品的托管平台，支持统一存储与全生命周期管理15。

<a name="jxqu-1745680643754"></a>Artifact Registry提供了一个集中、安全的Helm图表存储库，

<a name="cna5-1745684527240"></a>**HTTP liveness probe**

<a name="wlmg-1745684540445"></a>    HTTP健壮性探针，

<a name="i1zd-1745684584253"></a>向微服务的部署中添加HTTP存活探针。通过实现存活探针，Kubernetes系统会定期检查微服务

<a name="sjwa-1745684584592"></a>的指定端点以确定其健康状态。如果微服务变得无响应或遇到403错误，Kubernetes将自动重启

<a name="rlxv-1745684584594"></a>Pod。

<a name="xufi-1745685048292"></a>**SecretManager**

<a name="pjha-1745685056362"></a>提供了一个集中和安全的秘密存储，允许您存储和检索API密钥。

<a name="8chv-1745685086072"></a>通过环境变量的方式引用该秘钥(第三方API需要秘钥访问时)

<a name="b5gd-1745523404115"></a>**二进制授权**

<a name="ozjd-1745523412996"></a>**谷歌云二进制授权（Binary Authorization）**‌是一种安全机制，用于确保只有经过审核和授权的容器镜像才能部署到生产环境

<a name="alz5-1745523439849"></a>GKE：镜像

<a name="af8f-1745523444562"></a>云原生应用

<a name="sit8-1745269708225"></a>**‌蓝绿部署：流量全切(蓝-绿)，及时回滚**

<a name="zdwh-1745665840475"></a>维护两套独立且完整的环境，蓝色为旧版本，绿色为新版本

<a name="inkx-1745533297925"></a>0停机要求严格的场景金融系统，A/B测试需求

<a name="oifl-1745533370757"></a>强稳定性，

<a name="rfbq-1745533505838"></a>但风险高，需要全切

<a name="lc8h-1745533430308"></a>适合低风险的场景

<a name="cjyf-1745353244121"></a>**金丝雀部署：流量逐步，可控的方式让部分用户测试新版本**

<a name="xp2o-1745533351584"></a>逐渐验证的复杂系统

<a name="nb1s-1745533375831"></a>灵活，

<a name="5efv-1745533504245"></a>风险低

<a name="29fb-1745533395345"></a>性能未知/部分测试发布

<a name="rgzn-1745353225375"></a>**SRE原则**

<a name="desh-1745330856774"></a>**错误预算（Error Budget）在特定时间段内系统可以容忍的错误或故障数量。**

<a name="eycg-1745331029180"></a>功能和系统稳定性之间找到平衡，确保用户满意度下的灵活性

<a name="d1km-1745338230852"></a>其与SLO服务级别目标相关联

<a name="orut-1745330886211"></a>**风险管理**

<a name="ruag-1745330906173"></a>求考虑各种可能发生的风险和异常情况，并制定相应的应对措施。

<a name="qrpx-1745330919182"></a>渐进式推出回滚

<a name="uwb2-1745330922648"></a>快速定位修复，事后总结根本原因，防止再次发生，而不是追究个人责任

<a name="ck8x-1745330956581"></a>**持续 学习和改进**

<a name="tmsj-1745330971791"></a>定期负载测试，压力测试，混沌测试

<a name="2n2h-1745330986570"></a>鼓励饰演和创新，从失败中汲取经验教训

<a name="tyw8-1745331065922"></a>**自动化**

<a name="htxx-1745331081682"></a>提高效率，减少错误和不确定性

<a name="t5s9-1745330803832"></a>**SLA（Service Level Agreement）‌是指服务级别协议 法律合同，可用性、响应时间、补偿措施**

<a name="yspi-1745269713421"></a>**‌SLO（Service Level Objective）‌是指服务级别目标  延迟指标具体指标，不到两秒播放，且一周内99达到此目标**

<a name="q10u-1745269718201"></a>**‌SLI（Service Level Indicator）‌是指服务级别指标   成功可用性达到指标的比例：不到两秒播放的比例**  

‌SLA（Service Level Agreement）‌是指服务级别协议，它是服务提供商与客户之间签订的法律合同，明确了服务提供商在服务质量和性能方面的承诺。SLA通常包括服务提供商与客户之间的具体条款和条件，例如服务的可用性、响应时间等，并且规定了如果服务未达到这些标准时的补偿措施‌12。

‌SLO（Service Level Objective）‌是指服务级别目标，它是服务提供商期望达到的服务水平目标。SLO是具体的、可衡量的指标，用于指导服务提供商如何提供服务。例如，一个Web应用程序的SLO可能是视频在不到两秒内开始播放，且在一周内99%的时间内达到这个目标‌2。

<a name="h89o-1745269697550"></a>‌SLI（Service Level Indicator）‌是指服务级别指标，它是用来衡量服务实际表现的具体指标。SLI用于监测和评估服务的实际性能，帮助服务提供商了解其是否达到了SLO。例如，视频在不到两秒内开始播放的比例就是一个SLI，通过这个指标可以知道实际表现与SLO的差距‌12。

<a name="4j34-1745269222417"></a>**Terraform**

<a name="wn1n-1745426353286"></a>GCS  Google Cloud Storage:确保环境一致性


<a name="xcla-1745426338295"></a><a name="qupb-1745426327719"></a><a name="qd4q-1745426328285"></a>**AI / ML / 数据分析**

|<a name="mqsv-1745006166448"></a>GCP 服务|<a name="bxkr-1745006166451"></a>阿里云对应服务|<a name="jpif-1745006166454"></a>简要说明|
| :- | :- | :- |
|<a name="bu3m-1745006166458"></a>**Vertex AI**|<a name="uh9m-1745006166461"></a>**PAI（机器学习平台）**|<a name="f3vb-1745006166464"></a>全托管 AI/ML 平台|
|<a name="kiuv-1745006166468"></a>**AI Platform Notebooks**|<a name="wrkj-1745006166471"></a>**PAI-DSW（开发工作台）**|<a name="34ae-1745006166474"></a>Jupyter Notebook 环境|
|<a name="38zf-1745006166478"></a>**Dataflow**|<a name="ztkb-1745006166481"></a>**DataWorks + E-MapReduce**|<a name="9lsv-1745006166484"></a>流式/批量数据处理|
|<a name="gttb-1745006166488"></a>**Pub/Sub**|<a name="liw4-1745006166491"></a>**消息队列（MQ）/ EventBridge**|<a name="jm3t-1745006166494"></a>消息推送和异步通信|

<a name="rq19-1745006051503"></a>** 

<a name="nn2o-1745269011442"></a><a name="ms9d-1745006051902"></a>**图1.部署在Google Cloud上的典型多层Web应用。**

![image.png](Aspose.Words.f3889c45-de2a-4c0e-a029-3cc7d754c8f7.002.png)

<a name="0pjd-1703960346839"></a><a name="un2p-1703960283871"></a>**图7.零信任微服务环境中的应用交付。**

![image.png](Aspose.Words.f3889c45-de2a-4c0e-a029-3cc7d754c8f7.003.png)

<a name="hvhk-1703960929789"></a><a name="iclq-1703960284232"></a>**网格入站网关流量**

![image.png](Aspose.Words.f3889c45-de2a-4c0e-a029-3cc7d754c8f7.004.png)

<a name="qtso-1703961239891"></a><a name="wdy9-1703961083013"></a>**GCP概念介绍**

.台湾节点

.AWS Azure GCP平台的比较

<a name="p89f-1703541130563"></a>.GCP认证

<a name="ggyv-1703541111637"></a><a name="yvvb-1740760310236"></a>**虚拟机实例**

<a name="cwxb-1703546395338"></a>**.虚拟机实例创建**

<a name="eoin-1703546407515"></a>**.自动扩缩实例组**

本页面简要介绍了Compute Engine 实例。实例是Google基础架构上托管的虚拟机。您可以使用Google Cloud Console、Google Cloud CLI

或Compute Engine API创建实例或创建代管式实例组。

模板实例：虚拟机启动脚本，扩缩指标，cpu超60%

yum install -y

systemctl start httpd

<a name="lavd-1703541505718"></a>systemctl enable httpd

<a name="be5a-1703541270839"></a><a name="zraa-1741004553576"></a>**永久磁盘**

<a name="nnug-1703612874892"></a>**·可用区永久性磁盘:高效、可靠的块存储。**

<a name="ighl-1703613111760"></a>**1.增量快照**

<a name="5h2a-1703612875334"></a>**·区域永久性磁盘:在两个可用区中复制的区域块存储。**

<a name="pvwg-1703612926251"></a>**·本地SSD:高性能暂时性本地块存储。**

<a name="uabg-1703612875336"></a>**. Cloud Storage存储桶:经济实惠的对象存储。**

<a name="6kzl-1703612875338"></a>**.Filestore:适用于Google Cloud 用户的高性能文件存储。**

增量快照的工作原理如下:

·永久性磁盘的第一个成功快照是一个完整的快照，其中包含了该永久性磁盘上的所有数据。

第二个快照仅包含自从创建第一个快照以来的任何新增或修改的数据。自创建快照1以来未更改的数据不包括在内。对于任何未更改的数据，

快照2中包含了对快照1的引用。快照3中包含了自从创建快照⒉以来的任何新增或更改的数据，但不包含快照1或2中任何未更改的数据。

对于任何未更改的数据，快照3包含了对快照1和快照2中的磁盘块的引用 -即所有快照合起来才为完整数据

<a name="mejw-1703613057291"></a>永久性磁盘的所有后续快照都将重复此过程。系统始终是在上次成功获取的快照的基础上创建快照。

<a name="vxpl-1703612920413"></a>**永久性磁盘快照迁移虚拟机实例**

<a name="mz0d-1703614104543"></a>选择现有磁盘快照，(同步前一个虚拟机实例的区域与-httpd)

<a name="09yn-1703541282443"></a>**镜像(系统镜像创建实例)**

<a name="mdjz-1703614307842"></a>**.公共映像**

<a name="bh1n-1703614309803"></a>**.自定义映像(仅适用于您的Cloud项目)**

使用操作系统映像可以为实例创建启动磁盘。您可以使用以下一种映像类型:

·公共映像由Google、开源社区及第三方供应商提供和维护。默认情况下，所有Google Cloud项目都可以访问这些映像，并可以使用它们创建实例。

<a name="nykm-1703614253918"></a>·自定义映像仅适用于您的Cloud项目。您可以从启动磁盘和其他映像创建自定义映像。然后使用自定义映像创建实例。

<a name="ulho-1703541313574"></a>**.自定义镜像复制虚拟机实例**

创建一个自定义镜像

<a name="0gfe-1703724525213"></a>通过镜像创建虚拟机实例

<a name="tarc-1703724449830"></a>**健康检查**

<a name="rqxl-1703724471007"></a>**.概念**

<a name="i8fb-1703724480813"></a>**.代管实例组设置健康检查**

console.cloud.google.cn

实例组->健康检查

<a name="vt2j-1703726521298"></a>创建代管实例组 自动修复 sele 健康检查

<a name="yhzq-1616513583057"></a>**Deployment Manager** 

<a name="xdzn-1703725192671"></a>**.概念&使用**

<a name="2nza-1703727491343"></a>**配置**

<a name="kbmu-1703727491578"></a>**模板**

<a name="srgz-1703727491579"></a>**资源（yml）**

<a name="1mij-1703727491580"></a>**类型**

<a name="5yms-1703727491581"></a>**清单**

<a name="wrzx-1703727491582"></a>**部署** 

CLI

vi vm.yml

官方文档命令 

<a name="8p7h-1703727883784"></a>qucikstart-deployment-vm

<a name="aixa-1616512706321"></a>**IP地址**

<a name="e3rs-1703728098691"></a>**.临时外部ip(停止/删除资源即释放)**

<a name="es1k-1703731934318"></a>**.静态外部ip(存续)**

<a name="spba-1703736544939"></a>VPC -> ip地址 

<a name="8m0l-1703731963710"></a>**负载均衡(7层/L7,4层/L4)Ingress**

<a name="qxfq-1703776527441"></a>**内部HTTP(S)负载均衡** 

<a name="zavj-1703776539919"></a>**外部 HTTP(S)负载平衡**

<a name="ysf5-1703776527746"></a>**内部 TCP/UDP负载平衡**

<a name="rs4k-1703776527748"></a>**外部 TCP/UDP网络负载均衡**

<a name="480j-1703776543001"></a>**外部 SSL代理负载均衡**

<a name="pmhc-1703776527750"></a>**外部 TCP代理负载均衡**

<a name="iti7-1703728091914"></a>**.基于目标池的外部TCP网络负载均衡器**

Ingress

内部HTTP(S)负载均衡 （7层）

外部 HTTP(S)负载平衡

Google Cloud外部TCP/UDP网络负载均衡（此后称为网络负载均衡）是区域级的非代理负载均衡器。

网络负载均衡在Virtual Private Cloud (VPC)网络内同一个区域中的后端虚拟机(VM)实例之间分配TCP和UDP流量。

网络负载均衡器可以接收以下任何一种流量:

. 互联网上的任何客户端

·具有外部IP的Google Cloud虚拟机

·可通过Cloud NAT 或基于实例的NAT访问互联网的 Google Cloud虚拟机

根据转发规则配置，每个基于目标池的网络负载均衡器都支持以下协议流量类型之一:（4层）

· TCP

. UDP

<a name="dvxb-1703776587051"></a>.TCP和UDP

<a name="2550-1595249949242"></a>**.Armor(安全政策,DDos,准入IP)**

Google Cloud Armor可帮助您保护Google Cloud部署免受多种类型的威胁，包括分布式拒绝服务(DDoS)攻击以及跨站脚本攻击(XSS)和

SQL注入(SQLi)等应用攻击。Google Clpud Armor具有一些自动保护功能，还有一些您需要手动配置。本文档简要介绍了这些功能，

<a name="ahht-1703795656966"></a>其中一些仅适用于全球外部HTTP(S)负载均衡器和全球外部 HTTP(S)负载均衡器(经典版)--7层。

<a name="5cua-1703776702621"></a>**.为负载均衡器设置Armor操作**

仅演示， 需向谷歌申请limit

后端安全政策 -拒绝所有ip

<a name="gaf9-1703797873491"></a>边缘安全政策

<a name="gjla-1704131795897"></a>**Cloud Run**

0-X实例扩缩

<a name="m0jz-1704131868452"></a>在完全托管的环境中快速、安全地部署和扩展应用程序

<a name="jdgb-1704131855115"></a>**Cloud Kurbernets Engine**

更便捷的k8s

create my-first-clusters1  -> go cloud shell

nginx.yaml

`    `apiversion: v1kind: Pod

`    `metadata:

`        `name: nginx

`    `spec:

`        `containers:

`            `- name: nginx

`            `image: nginx

`            `ports:

`            `- name: web

`                `containerPort: 80

<a name="lelk-1704131931124"></a>create pod: kubectl apply -f nginx.yml

<a name="f4pw-1704131882886"></a>**Cloud Storage(对象存储(日志,图片))**

<a name="cste-1703802087930"></a>**.概念**

<a name="baiz-1703803038821"></a>**1.对象存储(日志,图片)**

<a name="9b82-1703803056615"></a>**2.保护数据安全(IAM,数据加密,身份验证,分区锁定，版本控制)**

Cloud Storage是一项用于将您的对象存储在Google Cloud中的服务。对象是由任意格式的文件组成的不可变的数据段。对象存储在称为存储桶的容器中。

所有存储桶都与项目相关联，您可以在组织下对项目进行分组。Google Cloud中的每个项目、存储桶和对象都属于Google Cloud资源，ComputeEngine 

实例等也属于资源。

创建项目后，您可以创建Cloud Storage存储分区，上传对象至存储分区，以及从存储分区中下载对象。您还可以授予权限，使您的数据可供您指定的主帐

号访问;或者针对某些用例（例如托管网站)，使您的数据可供公共互联网上的所有人访问。

保护数据安全

将对象上传到Cloud Storage之后，您可以精细地控制数据保护和共享方式。您可以采用以下方法来保护上传到Cloud Storage的数据:

.ldentity and Access Management(桶级权限):使用IAM控制哪些人有权访问您的Google Cloud项目中的资源。资源包括Cloud Storage存储分区和对

，象以及其他Google Cloud 实体，如ComputeEngine 实例。您可以向主帐号授予对存储分区和对象的特定类型的访问权限，

例如update .create或delete。

·数据加密:默认情况下，Cloud Storage使用服务器端加密来加密您的数据。您还可以使用补充数据加密选项，例如客户管理的加密密钥(CMEK)和客户

提供的加密密钥(CSEK)。

·身份验证:确保访问您的数据的所有人都有正确的凭据。

·存储分区锁定:通过指定保留政策控制对象在存储分区中必须保留的时长。

<a name="qcsh-1703802466102"></a>·对象版本控制:如果您启用对象版本控制，则在替换或删除对象的有效版本时，该版本可以保留为非当前版本。

<a name="xfiw-1703802132873"></a>**3.存储桶(基本容器)**

存储分区是用于存放数据的基本容器。您在Cloud Storage 中存储的所有内容都必须包含在存储分区中。您可以使用存储桶来整理数据并控制数据的

访问权限，但与目录和文件夹不同，您无法嵌套存储桶。虽然一个项目或位置中可以拥有的存储桶数量没有限制，但您可以限制创建/删除存储桶的速率。

创建存储桶时，您可以为其指定全局唯一名称以及存放存储桶及其内容的地理位置。创建存储桶后，您无法更改其名称和位置，但可以删除并重新创建

存储桶以实现类似结果。另外，您也可以配置可选的存储桶设置，这些设置可在存储桶创建期间进行配置，并在以后更改

存储类别

下表总结了Cloud Storage提供的主要存储类别。如需了解完整讨论，请参阅类别说明。--降低存储费用

存储类别            API和gsutil的名称    最短存储时长    典型的每月可用性

Standard存储空间    STANDARD                无        ·多区域和双区域位置高于99.99%·各区域达99.99%

Nearline存储空间     NEARLINE                30天        ·多区域和双区域位置达99.95%·各区域达99.9%

Coldline存储空间    COLDLINE                90天        ·多区域和双区域位置达99.95%·各区域达99.9%

<a name="ayib-1703803233465"></a>Archive存储空间    ARCHIVE                365天        ·多区域和双区域位置达99.95%·各区域达99.9%

<a name="a4wj-1703803208413"></a>**.存储桶相关操作**

创建

<a name="hokb-1703803485681"></a>权限-公开-非公开

<a name="tmfk-1703802111046"></a>**.对象生命周期管理**

为了支持常见使用场景（例如为对象设置存留时间(TTL)、保留对象的非当前版本或"降级"对象的存储类别以帮助管理费用)，

Cloud Storage提供了对象生命周期管理功能。

本页面介绍了此功能，以及使用此功能时可用的选项。如需了解生命周期配置文件的通用格式,

请参阅适用于JSON的存储分区资源表示法或适用于XML的生命周期配置格式。

为了使用对象生命周期管理，您需要定义生命周期配置，该配置必须在存储桶上设置。该配置包含一组适用于存储分区中的当前和未来对象的规则。

当对象满足其中一个规则的条件时，Cloud Storage会自动对该对象执行指定的操作。以下是一些示例用例:

·将超过365天的对象的存储类别降级为Coldline存储空间。·删除2013年1月1日之前创建的对象。

·在启用版本控制的存储分区中仅保留每个对象的3个最新版本。

SetStorageClass

规则    添加规则    全部删除    操作    对象条件    适用于

设置为Nearline    对象更新已超过29天    t    

设置为Coldline    对象更新已超过87天    i

设置为Archive    对象更新已超过359天    t

<a name="b9k3-1703804076884"></a>删除对象        对象更新已超过717天

<a name="bp2u-1703802871900"></a>**.Storage Transfer Service(多云数据转移)**

使用Storage Transfer Service这款产品可以:

·将数据从其他云存储服务商或者从本地或云端POSIX文件系统转移或备份到Cloud Storage存储桶。

·在Cloud Storage存储分区之间移动数据，以便供不同的用户组或应用使用。·将数据从Cloud Storage转移到本地或云端文件系统

·在文件系统之间转移数据。

.在数据处理流水线或分析工作流中定期移动数据。

我们支持从以下云存储服务商进行转移:

. Amazon S3

<a name="ueya-1703804893172"></a>. Microsoft Azure Blob Storage

<a name="tvdh-1703804630431"></a>**Cloud SQL**

<a name="iczc-1703872944177"></a>**.概念**

Cloud SQL为本地MySQL、PostgreSQL和SQL Server数据库提供基于云的替代方案。如果您希望减少数据库管理时间，将更多时间投入使用数据库，

<a name="mjqe-1703873306303"></a>则应使用Cloud SQL。在Compute Engine、App Engine和Google Cloud中的其他服务上运行的许多应用都使用CloudSQL来存储数据库。

<a name="2c49-1703872957141"></a>**.for Mysql**

创建 for mysql实例

<a name="lakd-1703873540509"></a>终端连接测试

<a name="dst5-1703872971504"></a>**.数据库灾难恢复**

<a name="nvah-1703877658127"></a>**1.使主实例不可用**

<a name="uiqd-1703877659651"></a>**2.实施灾难恢复**

<a name="ilev-1703877708388"></a>**3.新主启用高可用**

. Cloud SQL的两个实例(主实例和备用实例了位于单个区域(主要区域)内的两个不同地区中。系统将使用区域永久性磁盘同步实例。

。一个Cloud SQL实例（跨区域只读副本）位于另一个区域(辅助区域)。对于灾难恢复，设置跨区域只读副本以使用只读副本设置与主实例同步（使用异步复制)。

·创建高可用性Cloud sQL for MySQL实例。

·使用Cloud sQL for MySQL在Google Cloud 上部署一个跨区域只读副本.

·使用Cloud sQL for MySQL模拟灾难和故障切换情况。

·了解通过将回退过程与Cloud sQl for MySQL搭配使用来恢复初始部署的步骤。

本文档仅重点介绍跨区域灾难恢复故障切换和回退过程。如需了解单区域高可用性故障切换过程请参阅高可用性配置概览。

使主实例不可用-避免脑裂

在以下步骤中，您将通过停止主实例来模拟灾难情况。如果将跨区域只读副本附加到主实例，您必须先分离副本，否则无法停止Cloud sQL 实例。

1\.在Cloud Shell中，从主实例移除跨区域只读副本:

gcloud sql instances patch $cross\_region\_replica\_name l--no-enable-database-replication

当系统提示时，请接受继续操作的选项。

2\.停止主数据库实例:

gcloud sql instances patch $primary\_name --activation-policy NEVER

实施灾难恢复

1\.在Cloud Shell中，将跨区域只读副本提升为独立实例:

gcloud sql instances promote-replica $cross\_region\_replica\_name

<a name="88hm-1703874039693"></a>手动与自动执行的优缺点

<a name="ywx5-1703872998042"></a>**BigQuery(数仓，Sql分析)**

BigQuery是一种全代管式企业数据仓库，可帮助您使用机器学习、地理空间分析和商业智能等内置功能管理和分析数据。BigQuery的无服务器架构允许您使用SQL查询来回答组织面临的最大问题，而无需管理基础架构。BigQuery的可扩缩、分布式分析引擎可让您在几秒钟内查询TB级数据，在几分钟内查询PB级数据。

BigQuery使用针对分析查询进行了优化的列式存储格式来存储数据。BigQuery在表、行和列中显示数据，并完全支持数据库事务语义(ACID)。BigQuery存储会自动跨多个位置进行复制，以提供高可用性。

·了解数据仓库和数据集市中BigQuery资源的常见组织模式。。了解数据集，这是BigQuery的表和视图的顶层容器。

·使用方下方式将数据加载到BigQuery 中:

·使用Storage Write API流式传输数据。

·从本地文件或Cloud Storage批量加载数据，这些数据使用以下格式: Avro、Parquet.ORC、cSv、JSON、Datastore、Firestore格式。

<a name="fdu8-1703879016487"></a>.BigQuery Data Transfer Service可自动注入数据。

<a name="y2zg-1703873024896"></a>**.加载和查询数据**

<a name="bsyq-1703873049958"></a>**Bigtable(HBase竞品)**

Cloud Bigtable是稀疏填充的表，可以扩展到数十亿行和数千列，可让您存储TB级甚至是PB级的数据。每行中都会有一个被编入索引的值;这个值称为行键。Bigtable 能够以低延迟方式存储大量单键数据。它可以低延迟地支持高读写吞吐量，是MapReduce操作的理想数据源。Bigtable通过多个客户端库公开给应用，包括适用于Java的Apache HBase库的受支持扩展程序。因此，它可与开源大数据软件的现有Apache生态系统集成在一起。与自行管理的HBase安装相比，Bigtable强大的后端服务器具有多项关键优势:



·超高扩缩能力。Bigtable的扩缩能力与集群中的机器数成正比。自行管理的HBase安装存在一个设计瓶颈，在达到特定阈值后会对性能造成限制。Bigtable不存在此瓶颈，因此您可以扩展集群以处理更多读取和写入操作。

·易于管理。Bigtable可以透明方式处理升级和重启，而且会自动保持高度的数据耐用性。要复制您的数据，只需为您的实例添加第二个集群，然后系统便会自动开始复制。无需管理副本或区域;只需设计好表的架构，Bigtable就会为您处理剩余的操作。

.无需停机即可调整集群大小。您可以扩大Bigtable集群，运行几个小时以处理某个大型负载，

您可以使用Bigtable来存储和查询以下所有类型的数据:

·时间序列数据，例如多个服务器在一段时间内的CPU和内存使用率。

·营销数据，例如购买记录和客户偏好设置。

·金融数据，例如交易记录、股票价格和货币汇率。

·物联网数据，例如来自电表/气表和家用电器的使用量报告。·图表数据，例如有用户相互间连接方式的信息。

其他存储和数据库选项

Bigtable不是关系型数据库，不支持SQL查询、联接或多行事务。

·如果您需要为联机事务处理(OLTP)系统提供全面的SQL支持，请考虑使用Cloud Spanner或Cloud SQL。

·如果您需要在一个在线分析处理(OLAP)系统中进行互动式查询，请考虑使用BigQuery。

·如果您必须将高度结构化的对象存储在文档数据库中，且支持ACID事务和SQL类查询，请考虑使用Firestore。

<a name="1zx9-1703888243041"></a>·如需以低延迟方式存储内存数据，请考虑使用Memorystore。·如需实时同步用户之间的数据，请考虑使用Firebase 实时数据库。

<a name="oejc-1703873059122"></a>**.数据写入与读取**

列族

<a name="upgu-1703889403023"></a>    c1：value

<a name="xdlt-1703873017651"></a> **Firestore(会话存储)**

<a name="rqfz-1703889554776"></a>是小型结构化数据（如购物车）的理想选择

<a name="bh8z-1703872927361"></a>**Cloud Spanner(数据库跨区域高可用)**

<a name="16o7-1703965577093"></a>**Cloud Run（容器服务）**

<a name="7w27-1703965622477"></a>Cloud Run 是一种托管的容器服务，开发者可以将其容器化的应用程序部署到云上，而无需关心底层的基础设施管理。它支持自动扩展和按使用量计费。

<a name="evlf-1703889764129"></a>**Cloud Data Loss Prevention(损失预防/敏感数据)**


